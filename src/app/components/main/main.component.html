<main class="w-full p-3">
  <h2 class="mb-2 font-semibold">Folders</h2>
  <div class="grid grid-cols-9 max-2xl:grid-cols-8 max-xl:grid-cols-5 max-lg:grid-cols-5 max-md:grid-cols-4 max-sm:grid-cols-2 gap-2">
    <a *ngFor="let dir of directory.directories" [routerLink]="['/' + dir.id]"
       class="bg-white border border-gray-200 rounded-lg hover:bg-gray-100 dark:bg-gray-800
       dark:border-gray-700 dark:hover:bg-gray-700 flex flex-col justify-center items-center h-24 w-full cursor-pointer mr-3">
      <i class="fa-solid fa-folder text-indigo-700 text-4xl mb-1"></i>
      <p class="text-sm text-gray-600 font-medium">{{ dir.name }}</p>
    </a>
    <label for="my-modal-4"
       class="bg-white border border-gray-200 rounded-lg hover:bg-gray-100 dark:bg-gray-800
       dark:border-gray-700 dark:hover:bg-gray-700 flex flex-col justify-center items-center h-24 w-full cursor-default mr-3 cursor-pointer">
      <i class="fa-solid fa-circle-plus text-indigo-700 text-4xl mb-1"></i>
      <h3 class="text-sm text-gray-600 font-semibold">Create new folder</h3>
    </label>
  </div>
  <h2 class="mt-5 mb-2 font-semibold">Files</h2>
  <div class="grid grid-cols-8 max-2xl:grid-cols-6 max-xl:grid-cols-5 max-lg:grid-cols-4 max-md:grid-cols-3 max-sm:grid-cols-2 gap-2">
    <button *ngFor="let file of directory.files; let i = index" (click)="openFileCarousel(); fileCarouselCounter = i"
       class="pb-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 dark:bg-gray-800
       dark:border-gray-700 dark:hover:bg-gray-700 flex flex-col justify-center items-center w-full">
      <img [src]="file.src" alt="" *ngIf="file.src !== ''" class="w-full h-32 object-cover">
      <i class="fa-solid fa-file text-indigo-700 text-4xl mb-1" *ngIf="file.src === ''"></i>
      <p [title]="file.name"
         class="text-sm text-gray-600 font-medium w-full whitespace-nowrap overflow-hidden overflow-ellipsis text-center mt-2 px-3 cursor-default">{{ file.name }}</p>
    </button>
  </div>
  <section *ngIf="fileUploadPanelOpened" class="fixed right-6 border border-indigo-700 bottom-24 bg-white p-3 rounded rounded-lg w-96 h-80" (drop)="fileInputDrop($event)" (dragover)="preventEvent($event)" (dragenter)="preventEvent($event)">
    <form class="h-full">
      <label class="block text-sm font-medium text-gray-700 sr-only">Upload file</label>
      <div class="mt-1 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6 h-full">
        <div class="space-y-1 text-center flex flex-col justify-center">
          <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
            <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <div class="flex text-sm text-gray-600">
            <label for="file-upload" class="relative cursor-pointer rounded-md bg-white font-medium text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:text-indigo-500">
              <span>Choose files</span>
              <input id="file-upload" name="file-upload" type="file" class="sr-only" (change)="fileUploadChange($event)">
            </label>
            <p class="pl-1">or drag and drop</p>
          </div>
          <p class="text-xs text-gray-500">Files up to 8MB</p>
        </div>
      </div>
    </form>
  </section>
  <button (click)="fileUploadPanelOpened = !fileUploadPanelOpened" class="fixed bottom-6 right-6 w-14 h-14 bg-indigo-700 hover:bg-indigo-800 rounded rounded-xl text-white"><i class="fa-solid fa-upload"></i></button>
</main>
<input [formControl]="modalToggle" type="checkbox" id="my-modal-4" class="modal-toggle" />
<label for="my-modal-4" class="modal cursor-pointer">
  <label class="modal-box relative bg-white rounded-lg shadow dark:bg-gray-700" for="">
    <div class="flex items-end mb-3">
      <h3 class="text-lg font-bold mb-0 mr-auto">New folder</h3><label for="my-modal-4" class="btn btn-sm btn-circle">âœ•</label>
    </div>

    <form class="space-y-6" action="#" (ngSubmit)="newDirectory()">
      <div>
        <label for="directory_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white hidden">Folder name</label>
        <input [formControl]="newDirectoryName" type="text" name="directory_name" id="directory_name" class="bg-gray-50 border font-medium border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" placeholder="Example folder name..." required>
      </div>
      <button type="submit" class="w-full text-white bg-indigo-700 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-indigo-600 dark:hover:bg-indigo-700 dark:focus:ring-indigo-800">Create new folder</button>
    </form>
  </label>
</label>
<app-file-carousel *ngIf="directory.files.length > 0" [files]="directory.files" [fileCounter]="fileCarouselCounter" [openedSubject]="fileCarouselSubject"></app-file-carousel>
